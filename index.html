<!DOCTYPE html>
<html lang="en">

<head>
  <title>MKOTH Test</title>

  <meta charset="utf-8">
  <link rel="shortcut icon" sizes="16x16" href="images/favicon.ico">
  <link rel="shortcut icon" sizes="32x32" href="images/favicon-32px.png">
  <link rel="shortcut icon" sizes="48x48" href="images/favicon-48px.png">
  <link rel="apple-touch-icon" href="images/favicon-180px.png">
  <link rel="icon" sizes="192x192" href="images/favicon-192px.png">
  <link rel="stylesheet" href="styles.css">
  <script src="jquery-3.2.1.min.js" type="text/javascript"></script>
  <script>
    var rankingtsvurl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSITdXPzQ_5eidATjL9j7uBicp4qvDuhx55IPvbMJ_jor8JU60UWCHwaHdXcR654W8Tp6VIjg-8V7g0/pub?output=tsv';
    //var serieshistorytsvurl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSITdXPzQ_5eidATjL9j7uBicp4qvDuhx55IPvbMJ_jor8JU60UWCHwaHdXcR654W8Tp6VIjg-8V7g0/pub?gid=1634549359&single=true&output=tsv';
    jQuery.ajax
      ({
        method: "GET",
        url: rankingtsvurl,
        dataType: "text",
        success: function (data, status, xhr)
        {
          jQuery("#loadrank").html("Rankings");
          var rows = new String(data).split("\r\n");
          var table = jQuery("#ranktable");
          for (var i = 0; i < rows.length; i++)
          {
            var tablerow = jQuery("<tr></tr>");
            var cols = rows[i].split("\t");
            for (var j = 0; j < 5; j++)
            {
              tablerow.append(jQuery("<td></td>").append(cols[j]));
            }
            table.append(tablerow);
          }
        }
      });

    jQuery.ajax
      ({
        method: "GET",
        url: "https://danbooru.donmai.us/posts.json?limit=1&tags=rating:s+score:%3E=100&random=true",
        dataType: "json",
        success: loadbackgroundsuccess
      });

    function loadbackgroundsuccess(data, status, xhr)
    {
      model = data[0];
      console.log(model.file_url);
      jQuery("body").css("background-image", "url('" + "https://danbooru.donmai.us" + model.file_url + "')");
    }
  </script>
</head>

<body>
  <h1 id="loadrank">Loading...</h1>
  <table id="ranktable">
  </table>
</body>

</html>